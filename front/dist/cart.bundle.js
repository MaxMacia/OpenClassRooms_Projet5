(()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){d=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(d)throw c}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n={},r=getCart();function o(){var t,r=0,o=0,a=e(getCart());try{for(a.s();!(t=a.n()).done;){var c=t.value;r+=c.quantity,void 0!==n[c.id].price&&(o+=n[c.id].price*c.quantity)}}catch(e){a.e(e)}finally{a.f()}document.getElementById("totalQuantity").innerHTML=r,document.getElementById("totalPrice").innerHTML=o}var a,c=e(r);try{var i=function(){var e=a.value;loadConfig().then((function(t){config=t,fetch(config.host+"/api/products/"+e.id).then((function(e){return e.json()})).then((function(t){var a=t;n[e.id]=a,document.getElementById("cart__items").innerHTML+='\n        <article class="cart__item" data-id="'.concat(e.id,'" data-color="').concat(e.color,'">\n            <div class="cart__item__img">\n                <img src="').concat(a.imageUrl,'" alt="').concat(a.altTxt,'" />\n            </div>\n            <div class="cart__item__content">\n                <div class="cart__item__content__description">\n                <h2>').concat(a.name,"</h2>\n                <p>").concat(e.color,"</p>\n                <p>").concat(a.price,' €</p>\n                </div>\n                <div class="cart__item__content__settings">\n                <div class="cart__item__content__settings__quantity">\n                    <p>Qté :</p>\n                    <input\n                    type="number"\n                    class="itemQuantity"\n                    name="itemQuantity"\n                    min="1"\n                    max="100"\n                    value="').concat(e.quantity,'"\n                    data-id="').concat(e.id,'"\n                    data-color="').concat(e.color,'"\n                    />\n                </div>\n                <div class="cart__item__content__settings__delete">\n                    <p \n                    id="deleteItem" \n                    data-id="').concat(e.id,'" \n                    data-color="').concat(e.color,'"\n                    >\n                    Supprimer</p>\n                </div>\n                </div>\n            </div>\n            </article>');for(var c=document.querySelectorAll(".itemQuantity"),i=function(e){c[e].addEventListener("change",(function(t){var n=Number(c[e].value),a=r.find((function(t){return t.id==c[e].dataset.id&&t.color==c[e].dataset.color}));a.quantity=n,a.quantity<=0?(removeFromCart(a),window.location.reload()):saveCart(r),o()}))},d=0;d<c.length;d++)i(d);for(var l=document.querySelectorAll("#deleteItem"),u=function(e){l[e].addEventListener("click",(function(){var t=r.find((function(t){return t.id==l[e].dataset.id&&t.color==l[e].dataset.color}));removeFromCart(t),window.location.reload()}))},s=0;s<l.length;s++)u(s);o()})).catch((function(e){console.dir(e),document.getElementById("cart__items").innerHTML="<h3>Nous n'avons pas réussi à afficher les produits, veuillez nous excuser pour le désagrément.</h3>"}))})).catch((function(e){console.dir(e),document.getElementById("cart__items").innerHTML="<h3>Nous n'avons pas réussi à afficher les produits, veuillez nous excuser pour le désagrément.</h3>"}))};for(c.s();!(a=c.n()).done;)i()}catch(e){c.e(e)}finally{c.f()}document.getElementById("firstName").addEventListener("change",(function(){validName(document.getElementById("firstName"))})),document.getElementById("lastName").addEventListener("change",(function(){validName(document.getElementById("lastName"))})),document.getElementById("address").addEventListener("change",(function(){validAdress(document.getElementById("address"))})),document.getElementById("city").addEventListener("change",(function(){validCity(document.getElementById("city"))})),document.getElementById("email").addEventListener("change",(function(){validEmail(document.getElementById("email"))})),document.querySelector(".cart__order__form input[type='submit']").addEventListener("click",(function(t){t.preventDefault();var n,o=!0,a=e(document.querySelectorAll(".cart__order__form input:not(:last-child)"));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(!(o&=check(c)))break}}catch(e){a.e(e)}finally{a.f()}if(o){var i={firstName:"".concat(document.getElementById("firstName").value),lastName:"".concat(document.getElementById("lastName").value),address:"".concat(document.getElementById("address").value),city:"".concat(document.getElementById("city").value),email:"".concat(document.getElementById("email").value)},d=r.map((function(e){return e.id}));request={contact:i,products:d},loadConfig().then((function(e){config=e,fetch(config.host+"/api/products/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(request)}).then((function(e){return e.json()})).then((function(e){location.href="/front/html/confirmation.html?id=".concat(e.orderId)})).catch((function(e){console.dir(e);var t=document.createElement("div");document.querySelector("#emailErrorMsg").appendChild(t),t.innerHTML="<h3>Une erreur est survenue lors de la commande, veuillez nous excuser pour le désagrément.</h3>"}))})).catch((function(e){console.dir(e);var t=document.createElement("div");document.querySelector("#emailErrorMsg").appendChild(t),t.innerHTML="<h3>Une erreur est survenue lors de la commande, veuillez nous excuser pour le désagrément.</h3>"}))}}))})();